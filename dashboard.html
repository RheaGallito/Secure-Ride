<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile Page</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <div class="container">
    <img id="profile-pic" alt="Profile picture" class="profile-pic" height="100" src="asset/mini.png" width="100"/>
    <div id="profile-name" class="profile-name">[Full Name]</div>
    
    <div class="section">
      <div class="section-title">GPS Update</div>
      <a href="gps.html"><img alt="Map image for GPS update" height="100" src="asset/gps.png" width="300"/></a>
    </div>

    <div class="section">
      <div class="section-title">Locking System</div>
      <a href="unlocksystem.html"><img alt="Locking system image with two locks" height="100" src="asset/locksystem.png" width="300"/></a>
    </div>

    <div class="section">
      <div class="section-title">Battery Update</div>
      <a href="battery.html"><img alt="Battery update image with battery levels" height="100" src="asset/battery.png" width="300"/></a>
    </div>
  </div>
  <div class="menu">          
    <!-- Trigger/Open The Modal -->
    <button id="myBtn"><img src="asset/Settings.png" alt=""></button>
  </div>
                
  <!-- The Modal -->
  <div id="myModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
      <div class="sidebar">
        <a href="login.html"><div class="logout" style="color: white;">LOG OUT</div></a>
        <a href="dashboard.html"><button>DB</button></a> 
        <a href="gps.html"><button>GPS</button></a>
        <a href="unlocksystem.html"><button>LS</button></a> 
        <a href="battery.html"><button>BU</button></a>
        <div class="settings">
          <button class="close"><img src="asset/Settings.png" alt=""></button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Get the modal
    const modal = document.getElementById("myModal");
    const btn = document.getElementById("myBtn");
    const closeBtn = document.getElementsByClassName("close")[0];

    // Open modal
    btn.onclick = function() {
      modal.style.display = "block";
    };

    // Close modal
    if (closeBtn) {
      closeBtn.onclick = function() {
        modal.style.display = "none";
      };
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    };

    // Populate profile picture and name
    const registeredUser = JSON.parse(localStorage.getItem('registeredUser')) || {};
    const profilePic = registeredUser.profilePic || 'asset/mini.png'; // Default profile pic
    const fullName = registeredUser.fullname || 'Unknown User'; // Default name

    // Update dashboard
    document.getElementById('profile-pic').src = profilePic;
    document.getElementById('profile-name').innerText = fullName;
  </script>
</body>
</html>

